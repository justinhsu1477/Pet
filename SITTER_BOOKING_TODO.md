# 保母預約系統 - 待優化項目清單

## 📋 已完成功能
- ✅ 保母登入後進入預約列表頁面
- ✅ 預約列表顯示（日期篩選、狀態篩選）
- ✅ 預約詳情頁面
- ✅ 確認/拒絕預約功能
- ✅ 完成服務功能
- ✅ Kotlin + Java 混合開發（後端 Controller）

---

## 🚀 後續優化項目

### 1. 推送通知系統 (Push Notifications)
**優先級：高**

#### 後端實作
- [ ] 整合 Firebase Cloud Messaging (FCM)
- [ ] 創建通知服務 `NotificationService.kt`
- [ ] 實作通知場景：
  - 新預約建立時通知保母
  - 預約被確認/拒絕時通知飼主
  - 預約開始前 1 小時提醒
  - 預約完成後請求評價

#### Android 實作
- [ ] 整合 Firebase SDK
- [ ] 實作 `FirebaseMessagingService`
- [ ] 儲存 FCM Token 到後端
- [ ] 處理前景/背景通知顯示
- [ ] 點擊通知直接跳轉到對應預約詳情

**預期效果：** 提升保母響應速度，減少預約流失率

---

### 2. 預約統計儀表板 (Dashboard)
**優先級：中**

#### 功能需求
- [ ] 本月預約統計
  - 總預約數
  - 待確認數量
  - 已完成數量
  - 拒絕/取消數量
- [ ] 收入統計
  - 本月總收入
  - 本週收入
  - 收入趨勢圖表
- [ ] 評價統計
  - 平均評分
  - 五星比例
  - 最新評價列表

#### 實作清單
- [ ] 後端 API：`GET /api/sitter/{sitterId}/statistics`
- [ ] Android: `SitterDashboardActivity.kt`
- [ ] 使用 MPAndroidChart 繪製圖表
- [ ] Material Card 顯示關鍵指標

**預期效果：** 保母可清楚了解業務表現，提升服務品質

---

### 3. 日曆視圖 (Calendar View)
**優先級：中**

#### 功能需求
- [ ] 月曆顯示預約
  - 不同顏色標記不同狀態
  - 點擊日期查看當天預約
- [ ] 週視圖顯示時間軸
  - 清楚看到預約時段
  - 避免時間衝突
- [ ] 快速新增空閒時段

#### 實作清單
- [ ] 使用 `MaterialCalendarView` 或 `CalendarView`
- [ ] 創建 `SitterCalendarActivity.kt`
- [ ] 實作日期點擊事件
- [ ] 顯示當天預約列表

**預期效果：** 更直觀的時間管理，提升排程效率

---

### 4. 即時聊天功能 (Real-time Chat)
**優先級：低**

#### 功能需求
- [ ] 保母與飼主即時訊息溝通
- [ ] 圖片傳送（寵物照片）
- [ ] 訊息已讀狀態
- [ ] 未讀訊息徽章

#### 技術選擇
**方案 A：WebSocket**
- [ ] 後端使用 Spring WebSocket
- [ ] Android 使用 OkHttp WebSocket

**方案 B：Firebase Realtime Database**
- [ ] 更簡單的即時同步
- [ ] 離線支援

#### 實作清單
- [ ] 後端聊天 API 設計
- [ ] Android: `ChatActivity.kt`
- [ ] 訊息存儲設計
- [ ] 訊息推送整合

**預期效果：** 提升溝通效率，減少誤解

---

### 5. 評價系統 (Rating System)
**優先級：中**

#### 功能需求
- [ ] 預約完成後邀請評價
- [ ] 五星評分 + 文字評價
- [ ] 標籤式評價（專業、準時、細心等）
- [ ] 查看歷史評價
- [ ] 回覆飼主評價

#### 實作清單
- [ ] 後端 API：
  - `POST /api/bookings/{id}/rating` (飼主評價)
  - `GET /api/sitter/{id}/ratings` (查看評價)
  - `POST /api/ratings/{id}/reply` (保母回覆)
- [ ] Android: `RatingActivity.kt`
- [ ] 評價列表頁面
- [ ] 評價通知機制

**預期效果：** 建立信任，提升保母可信度

---

### 6. 進階篩選與搜尋 (Advanced Filters)
**優先級：低**

#### 功能需求
- [ ] 多條件篩選
  - 寵物類型（貓/狗）
  - 價格區間
  - 時間範圍
- [ ] 搜尋功能
  - 飼主姓名搜尋
  - 寵物名稱搜尋
- [ ] 排序功能
  - 按日期排序
  - 按價格排序
  - 按狀態排序

#### 實作清單
- [ ] 更新 API 支援查詢參數
- [ ] Android: 進階篩選 Dialog
- [ ] 搜尋框實作
- [ ] 排序選單

**預期效果：** 快速找到特定預約，提升操作效率

---

### 7. 離線支援 (Offline Support)
**優先級：低**

#### 功能需求
- [ ] 本地快取預約資料
- [ ] 離線瀏覽預約列表
- [ ] 網路恢復後自動同步
- [ ] 離線狀態提示

#### 實作清單
- [ ] 使用 Room Database 儲存預約
- [ ] 實作 Repository 快取邏輯
- [ ] WorkManager 背景同步
- [ ] 網路狀態監聽

**預期效果：** 無網路時仍可查看預約資訊

---

### 8. 預約提醒與行事曆整合
**優先級：低**

#### 功能需求
- [ ] 加入手機行事曆
- [ ] 預約前通知提醒
- [ ] 自訂提醒時間
- [ ] 地圖導航（如果有飼主地址）

#### 實作清單
- [ ] Android Calendar Provider API
- [ ] AlarmManager 設定提醒
- [ ] Google Maps 整合

**預期效果：** 減少忘記預約的情況

---

## 🔧 技術債務與重構

### 後端
- [ ] 加入更完善的錯誤處理
- [ ] API 請求日誌記錄
- [ ] 單元測試覆蓋率提升
- [ ] API 文檔自動生成（Swagger）

### Android
- [ ] 統一錯誤處理機制
- [ ] Loading 狀態優化
- [ ] 加入單元測試
- [ ] UI/UX 優化
  - 空狀態插圖
  - 載入骨架屏 (Skeleton)
  - 更好的錯誤提示

---

## 📊 效能優化

### 後端
- [ ] 資料庫查詢優化
- [ ] Redis 快取熱門資料
- [ ] API 響應時間監控

### Android
- [ ] RecyclerView ViewHolder 優化
- [ ] 圖片載入優化（Glide/Coil）
- [ ] 分頁載入（Pagination）
- [ ] Memory Leak 檢查

---

## 🎨 UI/UX 改進

- [ ] 深色模式支援
- [ ] 動畫效果優化
- [ ] 無障礙功能支援
- [ ] 多語言支援（中/英文）
- [ ] 響應式佈局優化

---

## 📝 文檔

- [ ] API 文檔撰寫
- [ ] 保母使用手冊
- [ ] 開發者文檔
- [ ] 架構設計文檔

---

## 🚦 建議優先順序

### Phase 1 - 核心功能強化 (1-2 週)
1. 推送通知系統 ⭐⭐⭐
2. 預約統計儀表板 ⭐⭐
3. 評價系統 ⭐⭐

### Phase 2 - 體驗提升 (2-3 週)
1. 日曆視圖 ⭐⭐
2. 進階篩選與搜尋 ⭐
3. UI/UX 改進 ⭐⭐

### Phase 3 - 進階功能 (3-4 週)
1. 即時聊天功能 ⭐
2. 離線支援 ⭐
3. 預約提醒與行事曆整合 ⭐

---

## 📌 備註

- 每個功能完成後請更新此文件
- 遇到問題請記錄在對應功能下方
- 定期 Review 優先級並調整

**最後更新：** 2026-01-23
**維護者：** Pet Care Team
