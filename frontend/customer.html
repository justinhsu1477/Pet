<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Care - é£¼ä¸»ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .pet-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--space-lg);
        }
        .pet-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--space-xl);
            transition: all var(--transition-base);
        }
        .pet-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }
        .pet-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
        }
        .pet-card-name { display: flex; align-items: center; gap: var(--space-sm); }
        .pet-card-name h3 { font-size: 1.15rem; margin: 0; }
        .pet-card-details { font-size: 0.9rem; color: var(--color-text-muted); }
        .pet-card-details p { margin-bottom: var(--space-xs); }
        .pet-card-actions {
            display: flex; gap: var(--space-sm);
            border-top: 1px solid var(--color-border);
            padding-top: var(--space-md); margin-top: var(--space-md);
        }
        .sitter-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-lg);
        }
        .sitter-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--space-xl);
            cursor: pointer;
            transition: all var(--transition-base);
            border: 2px solid transparent;
        }
        .sitter-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px); }
        .sitter-card.selected { border-color: var(--color-primary); background: rgba(45,71,57,0.03); }
        .booking-steps { display: flex; gap: var(--space-lg); margin-bottom: var(--space-xl); }
        .step-indicator { display: flex; align-items: center; gap: var(--space-sm); font-size: 0.9rem; color: var(--color-text-muted); }
        .step-indicator.active { color: var(--color-primary); font-weight: 600; }
        .step-indicator.completed { color: var(--color-success); }
        .step-number {
            width: 28px; height: 28px; border-radius: var(--radius-full);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; font-weight: 700;
            background: var(--color-border); color: var(--color-text-muted);
        }
        .step-indicator.active .step-number { background: var(--color-primary); color: white; }
        .step-indicator.completed .step-number { background: var(--color-success); color: white; }
        .step-content { display: none; }
        .step-content.active { display: block; }
        .step-nav { display: flex; justify-content: space-between; margin-top: var(--space-xl); }
        .booking-card {
            background: var(--color-surface); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); padding: var(--space-lg);
            margin-bottom: var(--space-md); display: flex;
            justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: var(--space-md);
            transition: box-shadow var(--transition-fast);
        }
        .booking-card:hover { box-shadow: var(--shadow-md); }
        .pet-select-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: var(--space-md);
        }
        .pet-select-card {
            background: var(--color-surface); border: 2px solid var(--color-border);
            border-radius: var(--radius-md); padding: var(--space-md);
            cursor: pointer; transition: all var(--transition-fast);
            display: flex; align-items: center; gap: var(--space-sm);
        }
        .pet-select-card:hover { border-color: var(--color-primary-light); }
        .pet-select-card.selected { border-color: var(--color-primary); background: rgba(45,71,57,0.05); }
        .star-rating { display: inline-flex; gap: 4px; cursor: pointer; font-size: 1.75rem; }
        .star-rating .star { color: var(--color-border); transition: color var(--transition-fast); }
        .star-rating .star.filled { color: var(--color-secondary); }
        .stars-display { display: inline-flex; gap: 2px; color: var(--color-secondary); }
        .filter-tabs { display: flex; gap: var(--space-sm); flex-wrap: wrap; margin-bottom: var(--space-lg); }
        .rating-card {
            background: var(--color-surface); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); padding: var(--space-lg); margin-bottom: var(--space-md);
        }
    </style>
</head>

<body>
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">ğŸ¾</div>
                <span class="sidebar-logo-text">Pet Care</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="nav-item-icon">ğŸ“Š</span><span>ç¸½è¦½</span>
                </a>
                <a href="#" class="nav-item" data-page="my-pets">
                    <span class="nav-item-icon">ğŸ¾</span><span>æˆ‘çš„å¯µç‰©</span>
                </a>
                <a href="#" class="nav-item" data-page="new-booking">
                    <span class="nav-item-icon">ğŸ“…</span><span>é ç´„æœå‹™</span>
                </a>
                <a href="#" class="nav-item" data-page="my-bookings">
                    <span class="nav-item-icon">ğŸ“‹</span><span>æˆ‘çš„é ç´„</span>
                </a>
                <a href="#" class="nav-item" data-page="ratings">
                    <span class="nav-item-icon">â­</span><span>è©•åƒ¹ä¿æ¯</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="nav-item" id="userInfo">
                    <div class="avatar avatar-sm" id="userAvatar">U</div>
                    <span id="userName">ä½¿ç”¨è€…</span>
                </div>
                <a href="#" class="nav-item" id="logoutBtn">
                    <span class="nav-item-icon">ğŸšª</span><span>ç™»å‡º</span>
                </a>
            </div>
        </aside>

        <main class="main-content">
            <!-- 1. Dashboard -->
            <div id="page-dashboard" class="page">
                <div class="page-header">
                    <h1 class="page-title">ç¸½è¦½</h1>
                    <p class="page-subtitle">æ­¡è¿å›ä¾†ï¼é€™æ˜¯æ‚¨çš„å¯µç‰©ç…§è­·æ¦‚æ³</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ¾</div>
                        <div class="stat-info"><h3>æˆ‘çš„å¯µç‰©æ•¸é‡</h3><div class="stat-value" id="stat-my-pets">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">â³</div>
                        <div class="stat-info"><h3>é€²è¡Œä¸­é ç´„</h3><div class="stat-value" id="stat-active-bookings">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-info"><h3>å·²å®Œæˆé ç´„</h3><div class="stat-value" id="stat-completed-bookings">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“‹</div>
                        <div class="stat-info"><h3>æœ€è¿‘ä¸€ç­†é ç´„ç‹€æ…‹</h3><div class="stat-value" id="stat-latest-booking" style="font-size:1.1rem;">-</div></div>
                    </div>
                </div>
            </div>

            <!-- 2. My Pets -->
            <div id="page-my-pets" class="page" style="display:none;">
                <div class="page-header flex justify-between items-center">
                    <div>
                        <h1 class="page-title">æˆ‘çš„å¯µç‰©</h1>
                        <p class="page-subtitle">ç®¡ç†æ‚¨çš„å¯µç‰©è³‡è¨Š</p>
                    </div>
                    <button class="btn btn-primary" onclick="CustomerApp.openAddPetModal()">â• æ–°å¢å¯µç‰©</button>
                </div>
                <div class="pet-cards-grid" id="pet-cards-container"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>

                <div id="pet-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:700px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title" id="pet-modal-title">æ–°å¢å¯µç‰©</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <form id="pet-form" onsubmit="CustomerApp.savePet(event)">
                            <input type="hidden" id="pet-id">
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                <div>
                                    <label class="form-label">å¯µç‰©é¡å‹ *</label>
                                    <select class="form-input" id="pet-type" required onchange="CustomerApp.updatePetTypeFields()">
                                        <option value="">è«‹é¸æ“‡</option>
                                        <option value="DOG">ğŸ• ç‹—ç‹—</option>
                                        <option value="CAT">ğŸˆ è²“å’ª</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="form-label">åå­— *</label>
                                    <input type="text" class="form-input" id="pet-name" required>
                                </div>
                            </div>
                            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                <div><label class="form-label">å“ç¨®</label><input type="text" class="form-input" id="pet-breed"></div>
                                <div><label class="form-label">å¹´é½¡</label><input type="number" class="form-input" id="pet-age" min="0" max="30"></div>
                                <div><label class="form-label">æ€§åˆ¥</label>
                                    <select class="form-input" id="pet-gender">
                                        <option value="">è«‹é¸æ“‡</option><option value="MALE">å…¬</option><option value="FEMALE">æ¯</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">ç‰¹æ®Šéœ€æ±‚</label>
                                <textarea class="form-input" id="pet-special-needs" rows="3"></textarea>
                            </div>
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                <div><label class="form-label">ç–«è‹—ç‹€æ…‹</label><input type="text" class="form-input" id="pet-vaccine"></div>
                                <div style="display:flex;align-items:center;padding-top:1.8rem;">
                                    <input type="checkbox" id="pet-neutered" style="margin-right:0.5rem;"><label for="pet-neutered">å·²çµç´®</label>
                                </div>
                            </div>
                            <div id="dog-fields" style="display:none;">
                                <h4 style="margin-bottom:0.75rem;color:var(--color-primary);">ç‹—ç‹—å°ˆå±¬è³‡è¨Š</h4>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                    <div><label class="form-label">é«”å‹</label>
                                        <select class="form-input" id="dog-size"><option value="SMALL">å°å‹</option><option value="MEDIUM">ä¸­å‹</option><option value="LARGE">å¤§å‹</option><option value="GIANT">å·¨å‹</option></select>
                                    </div>
                                    <div><label class="form-label">è¨“ç·´ç¨‹åº¦</label>
                                        <select class="form-input" id="dog-training"><option value="NONE">æœªè¨“ç·´</option><option value="BASIC">åŸºç¤</option><option value="INTERMEDIATE">ä¸­ç´š</option><option value="ADVANCED">é€²éš</option></select>
                                    </div>
                                </div>
                                <div style="margin-bottom:1rem;"><label class="form-label">æ¯æ—¥æ•£æ­¥æ¬¡æ•¸</label><input type="number" class="form-input" id="dog-walk-freq" min="0" max="10" value="1"></div>
                                <div style="display:flex;gap:1rem;flex-wrap:wrap;">
                                    <label style="display:flex;align-items:center;"><input type="checkbox" id="dog-walk-required" style="margin-right:0.5rem;">éœ€è¦é›ç‹—</label>
                                    <label style="display:flex;align-items:center;"><input type="checkbox" id="dog-friendly-dogs" style="margin-right:0.5rem;">å°ç‹—å‹å–„</label>
                                    <label style="display:flex;align-items:center;"><input type="checkbox" id="dog-friendly-children" style="margin-right:0.5rem;">å°å°å­©å‹å–„</label>
                                </div>
                            </div>
                            <div id="cat-fields" style="display:none;">
                                <h4 style="margin-bottom:0.75rem;color:var(--color-primary);">è²“å’ªå°ˆå±¬è³‡è¨Š</h4>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                    <div><label class="form-label">è²“ç ‚ç›†é¡å‹</label>
                                        <select class="form-input" id="cat-litter-box"><option value="OPEN">é–‹æ”¾å¼</option><option value="COVERED">å°é–‰å¼</option><option value="AUTOMATIC">è‡ªå‹•å¼</option><option value="TOP_ENTRY">ä¸Šé–‹å¼</option></select>
                                    </div>
                                    <div><label class="form-label">æŠ“æ’“ç¿’æ…£</label>
                                        <select class="form-input" id="cat-scratching"><option value="LOW">å¾ˆå°‘</option><option value="MODERATE">é©ä¸­</option><option value="HIGH">é »ç¹</option></select>
                                    </div>
                                </div>
                                <div><label style="display:flex;align-items:center;"><input type="checkbox" id="cat-indoor" style="margin-right:0.5rem;">å®¤å…§è²“</label></div>
                            </div>
                            <div style="display:flex;gap:0.75rem;margin-top:1.5rem;justify-content:flex-end;">
                                <button type="button" class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                                <button type="submit" class="btn btn-primary">å„²å­˜</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- 3. New Booking -->
            <div id="page-new-booking" class="page" style="display:none;">
                <div class="page-header">
                    <h1 class="page-title">é ç´„æœå‹™</h1>
                    <p class="page-subtitle">ç‚ºæ‚¨çš„å¯µç‰©é¸æ“‡åˆé©çš„ä¿æ¯</p>
                </div>
                <div class="booking-steps" id="booking-steps-bar">
                    <div class="step-indicator active" data-step="1"><div class="step-number">1</div><span>é¸æ“‡ä¿æ¯</span></div>
                    <div class="step-indicator" data-step="2"><div class="step-number">2</div><span>é¸æ“‡æ™‚é–“</span></div>
                    <div class="step-indicator" data-step="3"><div class="step-number">3</div><span>é¸æ“‡å¯µç‰©</span></div>
                    <div class="step-indicator" data-step="4"><div class="step-number">4</div><span>ç¢ºèªé ç´„</span></div>
                </div>
                <div class="step-content active" id="booking-step-1">
                    <div class="sitter-cards-grid" id="sitter-cards-container"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    <div class="step-nav"><div></div><button class="btn btn-primary" onclick="CustomerApp.bookingNextStep(1)">ä¸‹ä¸€æ­¥</button></div>
                </div>
                <div class="step-content" id="booking-step-2">
                    <div class="card" style="max-width:500px;">
                        <div style="margin-bottom:1rem;"><label class="form-label">æœå‹™æ—¥æœŸ *</label><input type="date" class="form-input" id="booking-date" required></div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                            <div><label class="form-label">é–‹å§‹æ™‚é–“ *</label><input type="time" class="form-input" id="booking-start-time" required></div>
                            <div><label class="form-label">çµæŸæ™‚é–“ *</label><input type="time" class="form-input" id="booking-end-time" required></div>
                        </div>
                    </div>
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="CustomerApp.bookingPrevStep(2)">ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="CustomerApp.bookingNextStep(2)">ä¸‹ä¸€æ­¥</button>
                    </div>
                </div>
                <div class="step-content" id="booking-step-3">
                    <p style="margin-bottom:var(--space-md);color:var(--color-text-muted);">è«‹é¸æ“‡è¦å¸¶å»çš„å¯µç‰©ï¼š</p>
                    <div class="pet-select-grid" id="booking-pet-select"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="CustomerApp.bookingPrevStep(3)">ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="CustomerApp.bookingNextStep(3)">ä¸‹ä¸€æ­¥</button>
                    </div>
                </div>
                <div class="step-content" id="booking-step-4">
                    <div class="card" style="max-width:600px;">
                        <h3 class="card-title" style="margin-bottom:var(--space-lg);">é ç´„ç¢ºèª</h3>
                        <div id="booking-summary"></div>
                        <div style="margin-top:1rem;">
                            <label class="form-label">å‚™è¨»ï¼ˆé¸å¡«ï¼‰</label>
                            <textarea class="form-input" id="booking-notes" rows="3" placeholder="å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚è«‹åœ¨æ­¤èªªæ˜..."></textarea>
                        </div>
                    </div>
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="CustomerApp.bookingPrevStep(4)">ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="CustomerApp.submitBooking()">ç¢ºèªé ç´„</button>
                    </div>
                </div>
            </div>

            <!-- 4. My Bookings -->
            <div id="page-my-bookings" class="page" style="display:none;">
                <div class="page-header">
                    <h1 class="page-title">æˆ‘çš„é ç´„</h1>
                    <p class="page-subtitle">æŸ¥çœ‹èˆ‡ç®¡ç†æ‚¨çš„é ç´„ç´€éŒ„</p>
                </div>
                <div class="filter-tabs">
                    <button class="btn btn-secondary" id="mbf-all" onclick="CustomerApp.filterBookings('all')">ğŸ“‹ å…¨éƒ¨</button>
                    <button class="btn btn-ghost" id="mbf-PENDING" onclick="CustomerApp.filterBookings('PENDING')">â³ å¾…ç¢ºèª</button>
                    <button class="btn btn-ghost" id="mbf-CONFIRMED" onclick="CustomerApp.filterBookings('CONFIRMED')">âœ… å·²ç¢ºèª</button>
                    <button class="btn btn-ghost" id="mbf-COMPLETED" onclick="CustomerApp.filterBookings('COMPLETED')">ğŸ‰ å·²å®Œæˆ</button>
                    <button class="btn btn-ghost" id="mbf-CANCELLED" onclick="CustomerApp.filterBookings('CANCELLED')">âŒ å·²å–æ¶ˆ</button>
                </div>
                <div id="my-bookings-list"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                <div id="booking-detail-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:700px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">é ç´„è©³æƒ…</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <div id="booking-detail-content"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    </div>
                </div>
            </div>

            <!-- 5. Ratings -->
            <div id="page-ratings" class="page" style="display:none;">
                <div class="page-header">
                    <h1 class="page-title">è©•åƒ¹ä¿æ¯</h1>
                    <p class="page-subtitle">ç‚ºå·²å®Œæˆçš„æœå‹™çµ¦äºˆè©•åƒ¹</p>
                </div>
                <div id="ratings-content"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                <div id="rating-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:500px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">è©•åƒ¹ä¿æ¯</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <form id="rating-form" onsubmit="CustomerApp.submitRating(event)">
                            <input type="hidden" id="rating-booking-id">
                            <input type="hidden" id="rating-sitter-id">
                            <input type="hidden" id="rating-score" value="0">
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">ä¿æ¯ï¼š</label>
                                <p id="rating-sitter-name" style="font-weight:600;margin:0;"></p>
                            </div>
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">è©•åˆ† *</label>
                                <div class="star-rating" id="rating-stars">
                                    <span class="star" data-value="1">&#9733;</span>
                                    <span class="star" data-value="2">&#9733;</span>
                                    <span class="star" data-value="3">&#9733;</span>
                                    <span class="star" data-value="4">&#9733;</span>
                                    <span class="star" data-value="5">&#9733;</span>
                                </div>
                            </div>
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">è©•è«–</label>
                                <textarea class="form-input" id="rating-comment" rows="4" placeholder="åˆ†äº«æ‚¨çš„é«”é©—..."></textarea>
                            </div>
                            <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                                <button type="button" class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                                <button type="submit" class="btn btn-primary">é€å‡ºè©•åƒ¹</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/customer.js"></script>
</body>

</html>
