<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Care - ä¿æ¯å·¥ä½œå°</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .booking-card {
            background: var(--color-surface); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); padding: var(--space-lg);
            margin-bottom: var(--space-md); display: flex;
            justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: var(--space-md);
            transition: box-shadow var(--transition-fast);
        }
        .booking-card:hover { box-shadow: var(--shadow-md); }
        .filter-tabs { display: flex; gap: var(--space-sm); flex-wrap: wrap; margin-bottom: var(--space-lg); }
        .rating-card {
            background: var(--color-surface); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); padding: var(--space-lg); margin-bottom: var(--space-md);
        }
        .stars-display { display: inline-flex; gap: 2px; color: var(--color-secondary); }
        .availability-card {
            background: var(--color-surface); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); padding: var(--space-lg);
            margin-bottom: var(--space-md); display: flex;
            justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: var(--space-md);
        }
        .availability-card:hover { box-shadow: var(--shadow-md); }
        .trend-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--color-border);
            font-size: 0.9rem;
        }
        .trend-item:last-child { border-bottom: none; }
        .dist-bar-container {
            display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm);
        }
        .dist-bar-label { width: 30px; text-align: right; font-size: 0.9rem; font-weight: 600; }
        .dist-bar-track { flex: 1; height: 20px; background: var(--color-border); border-radius: var(--radius-sm); overflow: hidden; }
        .dist-bar-fill { height: 100%; background: var(--color-secondary); border-radius: var(--radius-sm); transition: width var(--transition-base); }
        .dist-bar-count { width: 30px; font-size: 0.85rem; color: var(--color-text-muted); }
        .reply-block {
            margin-top: var(--space-md); padding: var(--space-md);
            background: var(--color-accent); border-radius: var(--radius-md);
        }
    </style>
</head>

<body>
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">ğŸ¾</div>
                <span class="sidebar-logo-text">Pet Care</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="nav-item-icon">ğŸ“Š</span><span>å·¥ä½œç¸½è¦½</span>
                </a>
                <a href="#" class="nav-item" data-page="bookings">
                    <span class="nav-item-icon">ğŸ“‹</span><span>é ç´„ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-page="availability">
                    <span class="nav-item-icon">ğŸ•</span><span>æ™‚é–“ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-page="ratings">
                    <span class="nav-item-icon">â­</span><span>æˆ‘çš„è©•åƒ¹</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="nav-item" id="userInfo">
                    <div class="avatar avatar-sm" id="userAvatar">U</div>
                    <span id="userName">ä½¿ç”¨è€…</span>
                </div>
                <a href="#" class="nav-item" id="logoutBtn">
                    <span class="nav-item-icon">ğŸšª</span><span>ç™»å‡º</span>
                </a>
            </div>
        </aside>

        <main class="main-content">
            <!-- 1. Dashboard -->
            <div id="page-dashboard" class="page">
                <div class="page-header">
                    <h1 class="page-title">å·¥ä½œç¸½è¦½</h1>
                    <p class="page-subtitle">æ­¡è¿å›ä¾†ï¼é€™æ˜¯æ‚¨çš„å·¥ä½œæ¦‚æ³</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">â³</div>
                        <div class="stat-info"><h3>å¾…è™•ç†é ç´„æ•¸</h3><div class="stat-value" id="stat-pending">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-info"><h3>æœ¬æœˆå®Œæˆæ•¸</h3><div class="stat-value" id="stat-completed">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’°</div>
                        <div class="stat-info"><h3>æœ¬æœˆæ”¶å…¥</h3><div class="stat-value" id="stat-revenue">-</div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">â­</div>
                        <div class="stat-info"><h3>å¹³å‡è©•åˆ†</h3><div class="stat-value" id="stat-rating">-</div></div>
                    </div>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg);">
                    <div class="card">
                        <div class="card-header"><h3 class="card-title">æœ€è¿‘ 7 å¤©æ”¶å…¥è¶¨å‹¢</h3></div>
                        <div id="revenue-trend"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3 class="card-title">ä»Šæ—¥å¾…è™•ç†é ç´„</h3></div>
                        <div id="today-pending"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    </div>
                </div>
            </div>

            <!-- 2. Bookings -->
            <div id="page-bookings" class="page" style="display:none;">
                <div class="page-header">
                    <h1 class="page-title">é ç´„ç®¡ç†</h1>
                    <p class="page-subtitle">ç®¡ç†æ‚¨çš„é ç´„è¨‚å–®</p>
                </div>
                <div class="filter-tabs">
                    <button class="btn btn-secondary" id="bf-all" onclick="SitterApp.filterBookings('all')">ğŸ“‹ å…¨éƒ¨</button>
                    <button class="btn btn-ghost" id="bf-PENDING" onclick="SitterApp.filterBookings('PENDING')">â³ å¾…ç¢ºèª</button>
                    <button class="btn btn-ghost" id="bf-CONFIRMED" onclick="SitterApp.filterBookings('CONFIRMED')">âœ… å·²ç¢ºèª</button>
                    <button class="btn btn-ghost" id="bf-COMPLETED" onclick="SitterApp.filterBookings('COMPLETED')">ğŸ‰ å·²å®Œæˆ</button>
                    <button class="btn btn-ghost" id="bf-CANCELLED" onclick="SitterApp.filterBookings('CANCELLED')">âŒ å·²å–æ¶ˆ</button>
                </div>
                <div id="bookings-list"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>

                <!-- Booking Detail Modal -->
                <div id="booking-detail-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:700px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">é ç´„è©³æƒ…</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <div id="booking-detail-content"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                    </div>
                </div>

                <!-- Confirm Modal -->
                <div id="confirm-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:500px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">ç¢ºèªé ç´„</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <p style="margin-bottom:var(--space-md);">ç¢ºå®šè¦æ¥å—é€™ç­†é ç´„å—ï¼Ÿ</p>
                        <div style="margin-bottom:var(--space-md);">
                            <label class="form-label">å›è¦†è¨Šæ¯ï¼ˆé¸å¡«ï¼‰</label>
                            <textarea class="form-input" id="confirm-message" rows="3" placeholder="å¯ç•™è¨€çµ¦é£¼ä¸»..."></textarea>
                        </div>
                        <input type="hidden" id="confirm-booking-id">
                        <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                            <button class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                            <button class="btn btn-primary" onclick="SitterApp.doConfirmBooking()">ç¢ºèªæ¥å—</button>
                        </div>
                    </div>
                </div>

                <!-- Reject Modal -->
                <div id="reject-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:500px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">æ‹’çµ•é ç´„</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <p style="margin-bottom:var(--space-md);">ç¢ºå®šè¦æ‹’çµ•é€™ç­†é ç´„å—ï¼Ÿ</p>
                        <div style="margin-bottom:var(--space-md);">
                            <label class="form-label">æ‹’çµ•åŸå› ï¼ˆé¸å¡«ï¼‰</label>
                            <textarea class="form-input" id="reject-reason" rows="3" placeholder="è«‹èªªæ˜æ‹’çµ•åŸå› ..."></textarea>
                        </div>
                        <input type="hidden" id="reject-booking-id">
                        <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                            <button class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                            <button class="btn btn-primary" style="background:var(--color-error);" onclick="SitterApp.doRejectBooking()">ç¢ºèªæ‹’çµ•</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Availability -->
            <div id="page-availability" class="page" style="display:none;">
                <div class="page-header flex justify-between items-center">
                    <div>
                        <h1 class="page-title">æ™‚é–“ç®¡ç†</h1>
                        <p class="page-subtitle">ç®¡ç†æ‚¨çš„å¯æœå‹™æ™‚æ®µ</p>
                    </div>
                    <button class="btn btn-primary" onclick="SitterApp.openAddAvailabilityModal()">â• æ–°å¢æ™‚æ®µ</button>
                </div>
                <div id="availability-list"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>

                <!-- Availability Modal -->
                <div id="availability-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:500px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title" id="availability-modal-title">æ–°å¢æ™‚æ®µ</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <form id="availability-form" onsubmit="SitterApp.saveAvailability(event)">
                            <input type="hidden" id="avail-id">
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">æ˜ŸæœŸ *</label>
                                <select class="form-input" id="avail-day" required>
                                    <option value="">è«‹é¸æ“‡</option>
                                    <option value="MONDAY">æ˜ŸæœŸä¸€</option>
                                    <option value="TUESDAY">æ˜ŸæœŸäºŒ</option>
                                    <option value="WEDNESDAY">æ˜ŸæœŸä¸‰</option>
                                    <option value="THURSDAY">æ˜ŸæœŸå››</option>
                                    <option value="FRIDAY">æ˜ŸæœŸäº”</option>
                                    <option value="SATURDAY">æ˜ŸæœŸå…­</option>
                                    <option value="SUNDAY">æ˜ŸæœŸæ—¥</option>
                                </select>
                            </div>
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                <div>
                                    <label class="form-label">é–‹å§‹æ™‚é–“ *</label>
                                    <input type="time" class="form-input" id="avail-start" required>
                                </div>
                                <div>
                                    <label class="form-label">çµæŸæ™‚é–“ *</label>
                                    <input type="time" class="form-input" id="avail-end" required>
                                </div>
                            </div>
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">æœå‹™å€åŸŸ</label>
                                <input type="text" class="form-input" id="avail-area" placeholder="ä¾‹å¦‚ï¼šå°åŒ—å¸‚å¤§å®‰å€">
                            </div>
                            <div style="margin-bottom:1.5rem;">
                                <label style="display:flex;align-items:center;">
                                    <input type="checkbox" id="avail-active" checked style="margin-right:0.5rem;">å•Ÿç”¨æ­¤æ™‚æ®µ
                                </label>
                            </div>
                            <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                                <button type="button" class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                                <button type="submit" class="btn btn-primary">å„²å­˜</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- 4. Ratings -->
            <div id="page-ratings" class="page" style="display:none;">
                <div class="page-header">
                    <h1 class="page-title">æˆ‘çš„è©•åƒ¹</h1>
                    <p class="page-subtitle">æŸ¥çœ‹é£¼ä¸»å°æ‚¨çš„è©•åƒ¹</p>
                </div>
                <div id="ratings-stats"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
                <div id="ratings-list" style="margin-top:var(--space-xl);"></div>

                <!-- Reply Modal -->
                <div id="reply-modal" class="modal" style="display:none;">
                    <div class="modal-backdrop"></div>
                    <div class="modal-content card" style="max-width:500px;">
                        <div class="card-header flex justify-between items-center">
                            <h3 class="card-title">å›è¦†è©•åƒ¹</h3>
                            <button class="btn btn-ghost modal-close">&times;</button>
                        </div>
                        <form id="reply-form" onsubmit="SitterApp.submitReply(event)">
                            <input type="hidden" id="reply-rating-id">
                            <div style="margin-bottom:1rem;">
                                <label class="form-label">å›è¦†å…§å®¹ *</label>
                                <textarea class="form-input" id="reply-content" rows="4" placeholder="è¼¸å…¥æ‚¨çš„å›è¦†..." required></textarea>
                            </div>
                            <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                                <button type="button" class="btn btn-ghost modal-close">å–æ¶ˆ</button>
                                <button type="submit" class="btn btn-primary">é€å‡ºå›è¦†</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/sitter.js"></script>
</body>

</html>
